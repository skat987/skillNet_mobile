{"version":3,"sources":["webpack:///./src/app/student/report-details/report-details.module.ts","webpack:///./src/app/student/report-details/report-details.page.html","webpack:///./src/app/student/report-details/report-details.page.scss","webpack:///./src/app/student/report-details/report-details.page.ts"],"names":[],"mappings":"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","file":"student-report-details-report-details-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ReportDetailsPage } from './report-details.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ReportDetailsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [ReportDetailsPage]\r\n})\r\nexport class ReportDetailsPageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>report-details</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content padding>\\r\\n  <ion-button shape=\\\"round\\\" color=\\\"primary\\\" fill=\\\"outline\\\" (click)=\\\"addReport()\\\">Ajouter un rapport</ion-button>\\r\\n  <div *ngIf=\\\"report\\\">  \\r\\n    <h3>Rapport du: {{ report.date }}</h3>\\r\\n    <h3>Rédigé par: {{ report.author.fullName }}</h3>\\r\\n    <h3>Note: {{ report.rate }}</h3>\\r\\n    <h4>Texte: </h4>\\r\\n    <p>{{ report.text }}</p>        \\r\\n  \\r\\n    <form [formGroup]=\\\"newCommentForm\\\" (ngSubmit)=\\\"createComment(report.id)\\\">\\r\\n      <div>\\r\\n        <ion-label>Nouveau commentaire: </ion-label>\\r\\n        <ion-textarea formControlName=\\\"text\\\" required type=\\\"textarea\\\"></ion-textarea>\\r\\n      </div>\\r\\n      <ion-button shape=\\\"round\\\" color=\\\"primary\\\" fill=\\\"outline\\\" type=\\\"submit\\\">\\r\\n        Ajouter\\r\\n      </ion-button>\\r\\n    </form>\\r\\n\\r\\n    <ion-list *ngIf=\\\"report.comments.length\\\">\\r\\n      <ion-list-header>\\r\\n        Commentaires du rapport: {{ report.comments.length }}\\r\\n      </ion-list-header>\\r\\n      <ion-item *ngFor=\\\"let comment of report.comments\\\">\\r\\n        <h4>{{ comment.author.fullName }} / {{ comment.createdAt }}</h4>\\r\\n        <p>{{ comment.text }}</p>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\nimport { Platform } from '@ionic/angular';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\n\r\n// Models\r\nimport { Comment } from './../../models/comment';\r\nimport { Report } from '../../models/report';\r\nimport { Student } from '../../models/student';\r\n\r\n// Services\r\nimport { ApiService } from '../../service/api/api.service';\r\n\r\n@Component({\r\n  selector: 'app-report-details',\r\n  templateUrl: './report-details.page.html',\r\n  styleUrls: ['./report-details.page.scss'],\r\n})\r\nexport class ReportDetailsPage implements OnInit {\r\n  public report: Report;\r\n  public newCommentForm: FormGroup;\r\n\r\n  // tslint:disable-next-line:max-line-length\r\n  constructor(private platform: Platform, private router: Router, private route: ActivatedRoute, private apiService: ApiService, private formBuilder: FormBuilder) { }\r\n\r\n  ngOnInit() {\r\n    // tslint:disable-next-line:max-line-length\r\n    this.platform.ready().then(() => {\r\n      this.setReport(this.route.snapshot.paramMap.get('report'), this.route.snapshot.paramMap.get('formation'));\r\n      this.newCommentForm = this.formBuilder.group({ text: ['', Validators.required] });\r\n    });\r\n  }\r\n\r\n  private setReport(reportId: any, formationId: any): void {\r\n    this.apiService.get('reportofStudent/' + reportId + '/of/' + formationId).then((resp: any) => {\r\n      // tslint:disable-next-line:max-line-length\r\n      this.report = new Report(resp[0].report_id, resp[0].title, resp[0].report_date, new Student(null, resp[0].student[0].lastname, resp[0].student[0].firstname, null, null, null, null, null, null, resp[0].student_id, resp[0].formation_id), resp[0].text, resp[0].rate, resp[0].report_is_daily, resp[0].created_at, resp[0].updated_at);\r\n      for (let i = 0; i < resp[0].comments.length; i++) {\r\n        // tslint:disable-next-line:max-line-length\r\n        this.report.addComment(new Comment(resp[0].comments[i].id, resp[0].comments[i].text, new Student(resp[0].comments[i].user_id, resp[0].comments[i].lastname, resp[0].comments[i].firstname), resp[0].comments[i].created_at));\r\n      }\r\n    }).catch(e => console.log('Error setting report: ', e));\r\n  }\r\n\r\n  public addReport(): void {\r\n    this.router.navigate(['/student/report-form']);\r\n  }\r\n\r\n  public createComment(reportId: any): void {\r\n    if (this.newCommentForm.invalid) { return; }\r\n    this.apiService.post('reportComment/create', { report_id: reportId, text: this.newCommentForm.controls.text.value })\r\n    .then(resp => console.log('create comment: ', resp))\r\n    .then(() => this.setReport(this.route.snapshot.paramMap.get('report'), this.route.snapshot.paramMap.get('formation')))\r\n    .catch(e => console.log('Error creating comment: ', e));\r\n  }\r\n}\r\n"],"sourceRoot":""}