{"version":3,"sources":["webpack:///./node_modules/@ionic/core/dist/esm/es5/gesture.js"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA,8DAA8D,wGAAwG;AACtK;AACA,2BAA2B,QAAQ;AACnC;AACA;AACA,4DAA4D,qGAAqG;AACjK,8DAA8D;AAC9D,kBAAkB,6BAA6B,cAAc,6BAA6B,oBAAoB,EAAE;AAChH;AACA,yDAAyD,YAAY;AACrE;AACA,KAAK,wBAAwB;AAC7B,wDAAwD,qGAAqG;AAC7J,kEAAkE,sCAAsC,+DAA+D;AACvK,iEAAiE,sCAAsC,kBAAkB;AACzH,8DAA8D,4BAA4B;AAC1F,6DAA6D,+BAA+B;AAC5F,yDAAyD,gDAAgD;AACzG,0DAA0D,0BAA0B;AACpF,gEAAgE,qCAAqC;AACrG,2DAA2D,sCAAsC,4BAA4B;AAC7H,qDAAqD,yCAAyC;AAC9F;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,sDAAsD,qDAAqD;AAC3G,mDAAmD,0EAA0E;AAC7H,qDAAqD;AACrD,kBAAkB,8DAA8D,uEAAuE;AACvJ,qDAAqD,kGAAkG;AACvJ,qDAAqD,oCAAoC;AACzF;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA,+CAA+C,gBAAgB;AAC/D;AACA;AACA;AACA;AACA,KAAK;AACL,qDAAqD;AACrD;AACA,+CAA+C,gBAAgB;AAC/D;AACA;AACA;AACA;AACA,KAAK;AACL,qDAAqD,oCAAoC;AACzF;AACA,CAAC;AACD;AACA;AACA,6BAA6B;AAC7B;AACA,wCAAwC,cAAc,mBAAmB,gBAAgB,EAAE,EAAE;AAC7F,oDAAoD,EAAE;AACtD;AACA;AACA;AACA,KAAK,oBAAoB;AACzB,uCAAuC,+BAA+B,6CAA6C,eAAe,UAAU,iNAAiN,eAAe,GAAG;AAC/W;AACA,6CAA6C,gCAAgC,gBAAgB,uMAAuM,EAAE,gBAAgB,gKAAgK,EAAE,gBAAgB,gBAAgB,EAAE,gBAAgB,gBAAgB,EAAE,eAAe,kDAAkD,EAAE,eAAe,oCAAoC,EAAE,eAAe,UAAU,EAAE,gBAAgB,yJAAyJ,EAAE,SAAS,gDAAgD,2BAA2B,EAAE,GAAG;AACn7B,yBAAyB,oDAAoD;AAC7E,uCAAuC,wEAAwE,iCAAiC,SAAS,yBAAyB,6BAA6B,EAAE,2BAA2B;AAC5O,kBAAkB,6CAA6C;AAC/D,kBAAkB,2CAA2C,oDAAoD,EAAE,0BAA0B,gBAAgB,EAAE,6BAA6B,UAAU,EAAE,GAAG;AAC3M,2BAA2B,wBAAwB,kGAAkG,yIAAyI,8KAA8K,8CAA8C,gBAAgB,iTAAiT,EAAE,gBAAgB,gLAAgL,EAAE,gBAAgB,kBAAkB,8DAA8D,EAAE,GAAG,cAAc,uGAAuG,mFAAmF,EAAE,oCAAoC,eAAe,0BAA0B,EAAE,eAAe,0JAA0J,EAAE,eAAe,mBAAmB,EAAE,eAAe,6CAA6C,EAAE,SAAS,4BAA4B,kBAAkB,EAAE,wBAAwB,0BAA0B,EAAE,GAAG;AAC1vD,gCAAgC,qDAAqD,oBAAoB,oEAAoE;AAC7K;AACA;AACA,CAAC,+DAA+D;AAChE,6BAA6B,kBAAkB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC;AACjC,iBAAiB,kCAAkC;AAC3C","file":"124.js","sourcesContent":["var GestureController = /** @class */ (function () {\r\n    function GestureController(t) {\r\n        this.doc = t, this.gestureId = 0, this.requestedStart = new Map, this.disabledGestures = new Map, this.disabledScroll = new Set, this.capturedId = null;\r\n    }\r\n    GestureController.prototype.createGesture = function (t) { return new GestureDelegate(this, this.newID(), t.name, t.priority ? t.priority : 0, !!t.disableScroll); };\r\n    GestureController.prototype.createBlocker = function (t) {\r\n        if (t === void 0) { t = {}; }\r\n        return new BlockerDelegate(this.newID(), this, t.disable, !!t.disableScroll);\r\n    };\r\n    GestureController.prototype.start = function (t, e, r) { return this.canStart(t) ? (this.requestedStart.set(e, r), !0) : (this.requestedStart.delete(e), !1); };\r\n    GestureController.prototype.capture = function (t, e, r) { if (!this.start(t, e, r))\r\n        return !1; var s = this.requestedStart; var i = -1e4; if (s.forEach(function (t) { i = Math.max(i, t); }), i === r) {\r\n        this.capturedId = e, s.clear();\r\n        var r_1 = new CustomEvent(\"ionGestureCaptured\", { detail: t });\r\n        return this.doc.body.dispatchEvent(r_1), !0;\r\n    } return s.delete(e), !1; };\r\n    GestureController.prototype.release = function (t) { this.requestedStart.delete(t), this.capturedId && t === this.capturedId && (this.capturedId = null); };\r\n    GestureController.prototype.disableGesture = function (t, e) { var r = this.disabledGestures.get(t); r || (r = new Set, this.disabledGestures.set(t, r)), r.add(e); };\r\n    GestureController.prototype.enableGesture = function (t, e) { var r = this.disabledGestures.get(t); r && r.delete(e); };\r\n    GestureController.prototype.disableScroll = function (t) { this.disabledScroll.add(t); };\r\n    GestureController.prototype.enableScroll = function (t) { this.disabledScroll.delete(t); };\r\n    GestureController.prototype.canStart = function (t) { return !this.capturedId && !this.isDisabled(t); };\r\n    GestureController.prototype.isCaptured = function () { return !!this.capturedId; };\r\n    GestureController.prototype.isScrollDisabled = function () { return this.disabledScroll.size > 0; };\r\n    GestureController.prototype.isDisabled = function (t) { var e = this.disabledGestures.get(t); return !!(e && e.size > 0); };\r\n    GestureController.prototype.newID = function () { return this.gestureId++, this.gestureId; };\r\n    return GestureController;\r\n}());\r\nvar GestureDelegate = /** @class */ (function () {\r\n    function GestureDelegate(t, e, r, s, i) {\r\n        this.id = e, this.name = r, this.priority = s, this.disableScroll = i, this.ctrl = t;\r\n    }\r\n    GestureDelegate.prototype.canStart = function () { return !!this.ctrl && this.ctrl.canStart(this.name); };\r\n    GestureDelegate.prototype.start = function () { return !!this.ctrl && this.ctrl.start(this.name, this.id, this.priority); };\r\n    GestureDelegate.prototype.capture = function () { if (!this.ctrl)\r\n        return !1; var t = this.ctrl.capture(this.name, this.id, this.priority); return t && this.disableScroll && this.ctrl.disableScroll(this.id), t; };\r\n    GestureDelegate.prototype.release = function () { this.ctrl && (this.ctrl.release(this.id), this.disableScroll && this.ctrl.enableScroll(this.id)); };\r\n    GestureDelegate.prototype.destroy = function () { this.release(), this.ctrl = void 0; };\r\n    return GestureDelegate;\r\n}());\r\nvar BlockerDelegate = /** @class */ (function () {\r\n    function BlockerDelegate(t, e, r, s) {\r\n        this.id = t, this.disable = r, this.disableScroll = s, this.ctrl = e;\r\n    }\r\n    BlockerDelegate.prototype.block = function () { if (this.ctrl) {\r\n        if (this.disable)\r\n            for (var _i = 0, _a = this.disable; _i < _a.length; _i++) {\r\n                var t = _a[_i];\r\n                this.ctrl.disableGesture(t, this.id);\r\n            }\r\n        this.disableScroll && this.ctrl.disableScroll(this.id);\r\n    } };\r\n    BlockerDelegate.prototype.unblock = function () { if (this.ctrl) {\r\n        if (this.disable)\r\n            for (var _i = 0, _a = this.disable; _i < _a.length; _i++) {\r\n                var t = _a[_i];\r\n                this.ctrl.enableGesture(t, this.id);\r\n            }\r\n        this.disableScroll && this.ctrl.enableScroll(this.id);\r\n    } };\r\n    BlockerDelegate.prototype.destroy = function () { this.unblock(), this.ctrl = void 0; };\r\n    return BlockerDelegate;\r\n}());\r\nvar gestureController = new GestureController(document);\r\nvar _sPassive;\r\nfunction supportsPassive(t) { if (void 0 === _sPassive)\r\n    try {\r\n        var e = Object.defineProperty({}, \"passive\", { get: function () { _sPassive = !0; } });\r\n        t.addEventListener(\"optsTest\", function () { }, e);\r\n    }\r\n    catch (t) {\r\n        _sPassive = !1;\r\n    } return !!_sPassive; }\r\nfunction addEventListener(t, e, r, s) { var i = supportsPassive(t) ? { capture: !!s.capture, passive: !!s.passive } : !!s.capture; var n, a; return t.__zone_symbol__addEventListener ? (n = \"__zone_symbol__addEventListener\", a = \"__zone_symbol__removeEventListener\") : (n = \"addEventListener\", a = \"removeEventListener\"), t[n](e, r, i), function () { t[a](e, r, i); }; }\r\nvar MOUSE_WAIT = 2e3;\r\nfunction createPointerEvents(t, e, r, s, i) { var n, a, c, o, l, d, u, h = 0; function p(s) { h = Date.now() + MOUSE_WAIT, e(s) && (!a && r && (a = addEventListener(t, \"touchmove\", r, i)), c || (c = addEventListener(t, \"touchend\", b, i)), o || (o = addEventListener(t, \"touchcancel\", b, i))); } function v(s) { h > Date.now() || e(s) && (!d && r && (d = addEventListener(getDocument(t), \"mousemove\", r, i)), u || (u = addEventListener(getDocument(t), \"mouseup\", m, i))); } function b(t) { S(), s && s(t); } function m(t) { f(), s && s(t); } function S() { a && a(), c && c(), o && o(), a = c = o = void 0; } function f() { d && d(), u && u(), d = u = void 0; } function g() { S(), f(); } function y(e) { e ? (n && n(), l && l(), n = l = void 0, g()) : (n || (n = addEventListener(t, \"touchstart\", p, i)), l || (l = addEventListener(t, \"mousedown\", v, i))); } return { setDisabled: y, stop: g, destroy: function () { y(!0), s = r = e = void 0; } }; }\r\nfunction getDocument(t) { return t instanceof Document ? t : t.ownerDocument; }\r\nfunction createPanRecognizer(t, e, r) { var s = r * (Math.PI / 180), i = \"x\" === t, n = Math.cos(s), a = e * e; var c = 0, o = 0, l = !1, d = 0; return { start: function (t, e) { c = t, o = e, d = 0, l = !0; }, detect: function (t, e) { if (!l)\r\n        return !1; var r = t - c, s = e - o, u = r * r + s * s; if (u < a)\r\n        return !1; var h = Math.sqrt(u), p = (i ? r : s) / h; return d = p > n ? 1 : p < -n ? -1 : 0, l = !1, !0; }, isGesture: function () { return 0 !== d; }, getDirection: function () { return d; } }; }\r\nfunction createGesture(t) { var e = Object.assign({ disableScroll: !1, direction: \"x\", gesturePriority: 0, passive: !0, maxAngle: 40, threshold: 10 }, t), r = e.canStart, s = e.onWillStart, i = e.onStart, n = e.onEnd, a = e.notCaptured, c = e.onMove, o = e.threshold, l = e.queue, d = { type: \"pan\", startX: 0, startY: 0, startTimeStamp: 0, currentX: 0, currentY: 0, velocityX: 0, velocityY: 0, deltaX: 0, deltaY: 0, timeStamp: 0, event: void 0, data: void 0 }, u = createPointerEvents(e.el, function (t) { var e = now(t); return !(b || !m) && (updateDetail(t, d), d.startX = d.currentX, d.startY = d.currentY, d.startTimeStamp = d.timeStamp = e, d.velocityX = d.velocityY = d.deltaX = d.deltaY = 0, d.event = t, (!r || !1 !== r(d)) && (p.release(), !!p.start() && (b = !0, 0 === o ? g() : (h.start(d.startX, d.startY), !0)))); }, function (t) { v ? !S && m && (S = !0, calcGestureData(d, t), l.write(f)) : (calcGestureData(d, t), h.detect(d.currentX, d.currentY) && (h.isGesture() && g() || (D(), u.stop(), a && a(d)))); }, function (t) { var e = v, r = m; D(), r && (calcGestureData(d, t), e ? n && n(d) : a && a(d)); }, { capture: !1 }), h = createPanRecognizer(e.direction, e.threshold, e.maxAngle), p = gestureController.createGesture({ name: t.gestureName, priority: t.gesturePriority, disableScroll: t.disableScroll }); var v = !1, b = !1, m = !0, S = !1; function f() { v && (S = !1, c && c(d)); } function g() { return !(p && !p.capture() || (v = !0, m = !1, d.startX = d.currentX, d.startY = d.currentY, d.startTimeStamp = d.timeStamp, s ? s(d).then(y) : y(), 0)); } function y() { i && i(d), m = !0; } function D() { v = !1, b = !1, S = !1, m = !0, p.release(); } return { setDisabled: function (t) { u.setDisabled(t); }, destroy: function () { p.destroy(), u.destroy(); } }; }\r\nfunction calcGestureData(t, e) { var r = t.currentX, s = t.currentY, i = t.timeStamp; updateDetail(e, t); var n = t.currentX, a = t.currentY, c = (t.timeStamp = now(e)) - i; if (c > 0 && c < 100) {\r\n    var e_1 = (n - r) / c, i_1 = (a - s) / c;\r\n    t.velocityX = .7 * e_1 + .3 * t.velocityX, t.velocityY = .7 * i_1 + .3 * t.velocityY;\r\n} t.deltaX = n - t.startX, t.deltaY = a - t.startY, t.event = e; }\r\nfunction updateDetail(t, e) { var r = 0, s = 0; if (t) {\r\n    var e_2 = t.changedTouches;\r\n    if (e_2 && e_2.length > 0) {\r\n        var t_1 = e_2[0];\r\n        r = t_1.clientX, s = t_1.clientY;\r\n    }\r\n    else\r\n        void 0 !== t.pageX && (r = t.pageX, s = t.pageY);\r\n} e.currentX = r, e.currentY = s; }\r\nfunction now(t) { return t.timeStamp || Date.now(); }\r\nexport { createGesture };\r\n"],"sourceRoot":""}